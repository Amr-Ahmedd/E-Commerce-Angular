<div style="padding: 20px;">

  <h2>Search Products (OpenFoodFacts)</h2>

  <mat-form-field appearance="outline" style="width: 300px;">
    <mat-label>Product name</mat-label>
    <input matInput [(ngModel)]="searchName" placeholder="e.g. milk" (keyup.enter)="search()">
  </mat-form-field>

<button type="button" mat-raised-button class="btn-green" (click)="search()">
  Search
</button>

  <div style="margin-top: 15px;">
    <mat-spinner *ngIf="loading"></mat-spinner>
  </div>

  <p *ngIf="error" style="color:red">{{ error }}</p>

  <!-- SEARCH RESULTS TABLE -->
  <table mat-table [dataSource]="searchDataSource" *ngIf="searchDataSource.data.length" style="margin-top: 20px;">

    <ng-container matColumnDef="image">
      <th mat-header-cell *matHeaderCellDef>Image</th>
      <td mat-cell *matCellDef="let p">
        <img [src]="p.imageUrl" width="50" *ngIf="p.imageUrl">
      </td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let p">{{ p.name }}</td>
    </ng-container>

    <ng-container matColumnDef="brand">
      <th mat-header-cell *matHeaderCellDef>Brand</th>
      <td mat-cell *matCellDef="let p">{{ p.brand }}</td>
    </ng-container>

    <ng-container matColumnDef="estimatedPrice">
      <th mat-header-cell *matHeaderCellDef>Estimated Price</th>
      <td mat-cell *matCellDef="let p">{{ p.estimatedPrice | number:'1.0-2' }}</td>
    </ng-container>

    <ng-container matColumnDef="calories">
      <th mat-header-cell *matHeaderCellDef>Calories</th>
      <td mat-cell *matCellDef="let p">{{ p.calories }}</td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Actions</th>
      <td mat-cell *matCellDef="let p">
<button type="button" mat-raised-button class="btn-green" (click)="approve(p)">
  Approve
</button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumnsSearch"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumnsSearch;"></tr>

  </table>


  <hr style="margin: 30px 0;">

  <h2>Approved Products (From DB)</h2>

  <!-- APPROVED PRODUCTS TABLE -->
  <table mat-table [dataSource]="approvedDataSource" *ngIf="approvedDataSource.data.length">

    <ng-container matColumnDef="image">
      <th mat-header-cell *matHeaderCellDef>Image</th>
      <td mat-cell *matCellDef="let p">
        <img [src]="p.imageUrl" width="50" *ngIf="p.imageUrl">
      </td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let p">{{ p.name }}</td>
    </ng-container>

    <ng-container matColumnDef="brand">
      <th mat-header-cell *matHeaderCellDef>Brand</th>
      <td mat-cell *matCellDef="let p">{{ p.brand }}</td>
    </ng-container>

    <ng-container matColumnDef="estimatedPrice">
      <th mat-header-cell *matHeaderCellDef>Estimated Price</th>
      <td mat-cell *matCellDef="let p">{{ p.estimatedPrice | number:'1.0-2' }}</td>
    </ng-container>

    <ng-container matColumnDef="calories">
      <th mat-header-cell *matHeaderCellDef>Calories</th>
      <td mat-cell *matCellDef="let p">{{ p.calories }}</td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Actions</th>
      <td mat-cell *matCellDef="let p">
<button type="button" mat-raised-button class="btn-red" (click)="removeApproved(p)">
  Delete
</button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumnsApproved"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumnsApproved;"></tr>

  </table>

</div>
